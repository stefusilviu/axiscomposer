var AB_Icon_Fonts=AB_Icon_Fonts||{};!function(a,b,c){"use strict";AB_Icon_Fonts.AppView=b.View.extend({el:"#axisbuilder-iconfonts",events:{"click .add-iconfont":"addButton","click .del-iconfont":"delButton"},initialize:function(){c.bindAll(this,"render"),this.render()},render:function(){console.log("Pagebuilder render goes here!")},addButton:function(b){var c=a(".add-iconfont");b.preventDefault();var d=wp.media.frames.axisbuilder_file_frame=wp.media({title:c.data("title"),library:{type:c.data("type")},button:{text:c.data("button")},multiple:!1});d.on("select",function(){var b=d.state().get("selection").first().toJSON();a("#"+c.data("target")).val(b.id).trigger("change"),a("body").trigger(c.data("trigger"),[b,c])}),d.open()},delButton:function(a){a.preventDefault(),this.undelegateEvents()}}),a(document).ready(function(){new AB_Icon_Fonts.AppView,a("body").on("insert_iconfont_zip",AB_Icon_Fonts.icon_insert)}),AB_Icon_Fonts.icon_insert=function(b,c){var d=a("#msg");if("zip"!==c.subtype)return a(".spinner").hide(),d.html('<div class="error"><p>Please upload a valid ZIP file.<br />You can create the file on icomoon.io</p></div>'),d.show(),setTimeout(function(){d.slideUp()},5e3),!1;var e={value:c,action:"axisbuilder_add_iconfont",security:axisbuilder_admin_iconfonts.add_custom_iconfont_nonce};a.ajax({url:axisbuilder_admin_iconfonts.ajax_url,data:e,type:"POST",beforeSend:function(){a(".spinner").css({opacity:0,display:"block",position:"absolute",top:"21px",left:"300px"}).animate({opacity:1})},success:function(b){a(".spinner").hide(),b.match(/axisbuilder_iconfont_added/)?(d.html('<div class="updated"><p>Font icon added successfully! Reloading the page... </p></div>'),d.show()):(d.html('<div class="error"><p>Couldn\'t add the font.<br/>The script returned the following error: '+b+"</p></div>"),d.show())}})}}(jQuery,Backbone,_);