!function(a){function b(a){var b,c,d=[];if("number"==typeof a)d.push(a);else{c=a.split(",");for(var e=0;e<c.length;e++)if(b=c[e].split("-"),2===b.length)for(var f=parseInt(b[0],10);f<=b[1];f++)d.push(f);else 1===b.length&&d.push(parseInt(b[0],10))}return d}a.fn.gist=function(){return this.each(function(){var c,d,e,f,g,h,i,j,k=a(this),l={};return k.css("display","block"),c=k.data("gist-id")||"",e=k.data("gist-file"),h=k.data("gist-hide-footer")===!0,i=k.data("gist-hide-line-numbers")===!0,f=k.data("gist-line"),g=k.data("gist-highlight-line"),j=void 0!==k.data("gist-show-loading")?k.data("gist-show-loading"):!0,e&&(l.file=e),c?(d="https://gist.github.com/"+c+".json",j&&k.html("Loading gist "+d+(l.file?", file: "+l.file:"")+"..."),void a.ajax({url:d,data:l,dataType:"jsonp",timeout:1e4,success:function(c){var e,j,l,m,n;c&&c.div?(c.stylesheet&&(0===c.stylesheet.indexOf("<link")?c.stylesheet=c.stylesheet.replace(/\\/g,"").match(/href=\"([^\s]*)\"/)[1]:0!==c.stylesheet.indexOf("http")&&(0!==c.stylesheet.indexOf("/")&&(c.stylesheet="/"+c.stylesheet),c.stylesheet="https://gist.github.com"+c.stylesheet)),c.stylesheet&&0===a('link[href="'+c.stylesheet+'"]').length&&(e=document.createElement("link"),j=document.getElementsByTagName("head")[0],e.type="text/css",e.rel="stylesheet",e.href=c.stylesheet,j.insertBefore(e,j.firstChild)),n=a(c.div),n.removeAttr("id"),k.html("").append(n),g&&(m=b(g),n.find("td.line-data").css({width:"100%"}),n.find(".js-file-line").each(function(b){-1!==a.inArray(b+1,m)&&a(this).css({"background-color":"rgb(255, 255, 204)"})})),f&&(l=b(f),n.find(".js-file-line").each(function(b){-1===a.inArray(b+1,l)&&a(this).parent().remove()})),h&&(n.find(".gist-meta").remove(),n.find(".gist-data").css("border-bottom","0px"),n.find(".gist-file").css("border-bottom","1px solid #ddd")),i&&n.find(".js-line-number").remove()):k.html("Failed loading gist "+d)},error:function(a,b){k.html("Failed loading gist "+d+": "+b)}})):!1})},a(function(){a("[data-gist-id]").gist()})}(jQuery);